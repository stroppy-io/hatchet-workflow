syntax = "proto3";

package database;

import "crossplane/deployment.proto";
import "validate/validate.proto";

option go_package = "github.com/stroppy-io/hatchet-workflow/internal/proto/hatchet";

message Placement {
    message Master {}
    message AllNodes {}
    message Replica {
        uint32 replica_index = 1;  // 0-based индекс реплики
    }
    message DedicatedVm {
        crossplane.MachineInfo vm_params = 1 [(validate.rules).message.required = true];
    }
    oneof target {
        option (validate.required) = true;
        Master master = 1;
        AllNodes all_nodes = 2;
        Replica replica = 3;
        DedicatedVm dedicated = 4;
    }
}

