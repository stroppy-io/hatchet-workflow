postgresCluster:
  defaults:
    version: VERSION_17
    storageEngine: STORAGE_ENGINE_HEAP
  nodes:
    - name: pg-master
      hardware:
        cores: 4
        memory: 8
        disk: 100
      postgres:
        role: ROLE_MASTER
      backup:
        config:
          schedule: "0 4 * * *"
          retention: 7d
          tool: WAL_G
          local:
            path: /var/backups/postgres
    - name: pg-replica-0
      hardware:
        cores: 2
        memory: 4
        disk: 50
      postgres:
        role: ROLE_REPLICA
    - name: pg-replica-1
      hardware:
        cores: 2
        memory: 4
        disk: 50
      postgres:
        role: ROLE_REPLICA
    - name: etcd-1
      hardware:
        cores: 2
        memory: 4
        disk: 40
      etcd:
        monitor: false
    - name: etcd-2
      hardware:
        cores: 2
        memory: 4
        disk: 40
      etcd:
        monitor: false
    - name: etcd-3
      hardware:
        cores: 2
        memory: 4
        disk: 40
      etcd:
        monitor: false
    - name: pgbouncer-1
      hardware:
        cores: 1
        memory: 2
        disk: 20
      pgbouncer:
        config:
          poolSize: 100
          poolMode: TRANSACTION
          maxClientConn: 1000
        monitor: false
    - name: pgbouncer-2
      hardware:
        cores: 1
        memory: 2
        disk: 20
      pgbouncer:
        config:
          poolSize: 100
          poolMode: TRANSACTION
          maxClientConn: 1000
        monitor: false
