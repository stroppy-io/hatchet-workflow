postgresCluster:
  defaults:
    version: VERSION_17
    storageEngine: STORAGE_ENGINE_HEAP
    patroni:
      enabled: true
  nodes:
    - name: pg-master
      hardware:
        cores: 4
        memory: 8
        disk: 100
      postgres:
        role: ROLE_MASTER
      etcd:
        monitor: true
      pgbouncer:
        config:
          poolSize: 200
          poolMode: TRANSACTION
          maxClientConn: 2000
        monitor: true
      backup:
        config:
          schedule: "0 1 * * *"
          retention: 14d
          tool: WAL_G
          local:
            path: /var/backups/postgres
      monitoring:
        nodeExporter: {}
        postgresExporter: {}
    - name: pg-replica-0
      hardware:
        cores: 2
        memory: 4
        disk: 50
      postgres:
        role: ROLE_REPLICA
      etcd:
        monitor: true
      backup:
        config:
          schedule: "0 1 * * *"
          retention: 14d
          tool: WAL_G
          local:
            path: /var/backups/postgres
      monitoring:
        nodeExporter: {}
        postgresExporter: {}
    - name: pg-replica-1
      hardware:
        cores: 2
        memory: 4
        disk: 50
      postgres:
        role: ROLE_REPLICA
      etcd:
        monitor: true
      backup:
        config:
          schedule: "0 1 * * *"
          retention: 14d
          tool: WAL_G
          local:
            path: /var/backups/postgres
      monitoring:
        nodeExporter: {}
        postgresExporter: {}
